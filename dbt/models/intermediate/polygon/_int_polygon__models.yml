version: 2

models:
  - name: int_polygon__stock_bars_enriched
    description: "Enriches the daily stock bar data with calculated technical indicators like moving averages. This model is incremental."
    columns:
      - name: stock_bar_id
        description: "The unique identifier for a single day's stock bar (ticker + trade_date)."
        tests:
          - unique
          - not_null
      - name: ticker
        description: "The stock ticker symbol."
      - name: trade_date
        description: "The date of the stock bar."
      - name: loaded_at
        description: "The timestamp when the record was loaded into the staging layer."
      - name: open_price
        description: "The opening price for the day."
      - name: high_price
        description: "The highest price for the day."
      - name: low_price
        description: "The lowest price for the day."
      - name: close_price
        description: "The closing price for the day."
      - name: volume
        description: "The trading volume for the day."
      - name: transactions
        description: "The number of transactions for the day."
      - name: moving_avg_20d
        description: "The 20-day simple moving average of the closing price."
      - name: moving_avg_50d
        description: "The 50-day simple moving average of the closing price."
  - name: int_polygon__options_bars_enriched
    description: "Enriches daily options data with calculated metrics like days to expiration. This model is incremental."
    columns:
      - name: option_bar_id
        description: "The unique identifier for a single day's option bar."
        tests:
          - unique
          - not_null
      - name: option_symbol
        description: "The unique OCC symbol for the option contract."
      - name: underlying_ticker
        description: "The ticker symbol of the underlying stock."
      - name: trade_date
        description: "The date of the option bar."
      - name: expiration_date
        description: "The expiration date of the option contract."
      - name: strike_price
        description: "The strike price of the option contract."
      - name: option_type
        description: "The type of option (call or put)."
      - name: close_price
        description: "The closing price of the option for the day."
      - name: volume
        description: "The trading volume for the day."
      - name: volume_weighted_average_price
        description: "The volume-weighted average price for the day."
      - name: days_to_expiration
        description: "The number of days from the trade date to the option's expiration date."
  - name: int_polygon__stocks_options_joined
    description: "Joins enriched options and stock data to create a comprehensive view for analysis. This model is incremental."
    columns:
      - name: option_bar_id
        description: "The unique identifier for a single day's option bar."
        tests:
          - unique
          - not_null
      - name: moneyness
        description: "Indicates if the option is in-the-money, at-the-money, or out-of-the-money."
