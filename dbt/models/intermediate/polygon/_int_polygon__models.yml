version: 2

models:
  - name: int_polygon__stock_prices_enriched
    description: "Enriches the daily stock bar data with calculated technical indicators like moving averages. This model is incremental."
    columns:
      - name: stock_bar_id
        description: "The unique identifier for a single day's stock bar (ticker + trade_date)."
        tests:
          - unique
          - not_null
      - name: ticker
        description: "The stock ticker symbol."
      - name: trade_date
        description: "The date of the stock bar."
      - name: loaded_at
        description: "The timestamp when the record was loaded into the staging layer."
      - name: open_price
        description: "The opening price for the day."
      - name: high_price
        description: "The highest price for the day."
      - name: low_price
        description: "The lowest price for the day."
      - name: close_price
        description: "The closing price for the day."
      - name: volume
        description: "The trading volume for the day."
      - name: transactions
        description: "The number of transactions for the day."
      - name: moving_avg_20d
        description: "The 20-day simple moving average of the closing price."
      - name: moving_avg_50d
        description: "The 50-day simple moving average of the closing price."
