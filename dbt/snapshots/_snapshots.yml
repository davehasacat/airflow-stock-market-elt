version: 2

snapshots:
  - name: snapshot_polygon_stock_bars
    description: "A snapshot of the daily OHLCV data for all tickers from the Polygon.io API. This table tracks the history of changes to the raw source data over time."
    columns:
      - name: ticker
        description: "The stock ticker symbol."
        tests:
          - not_null
      - name: trade_date
        description: "The date of the stock bar."
        tests:
          - not_null
      - name: inserted_at
        description: "The timestamp when the record was loaded into the raw source table."
      - name: open
        description: "The opening price for the day."
      - name: high
        description: "The highest price for the day."
      - name: low
        description: "The lowest price for the day."
      - name: close
        description: "The closing price for the day."
      - name: vwap
        description: "The volume-weighted average price for the day."
      - name: volume
        description: "The trading volume for the day."
      - name: transactions
        description: "The number of transactions for the day."
      - name: dbt_valid_from
        description: "The timestamp when the snapshot row became valid."
      - name: dbt_valid_to
        description: "The timestamp when the snapshot row became invalid. A NULL value indicates the current version of the record."
      - name: dbt_scd_id
        description: "A unique key generated by dbt for each snapshot row."
      - name: dbt_updated_at
        description: "The timestamp when the snapshot row was last updated."
  - name: snapshot_polygon_options_bars
    description: "A snapshot of the daily OHLCV data for all option contracts from the Polygon.io API."
    columns:
      - name: option_symbol
        description: "The unique OCC symbol for the option contract."
        tests:
          - not_null
      - name: trade_date
        description: "The date of the option bar."
        tests:
          - not_null
